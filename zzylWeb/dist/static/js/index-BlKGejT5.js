import{S as L,z as fe,d as ce,r as i,A as _e,I as ve,e as r,F as K,c as C,o as d,G as V,f as t,H as E,l as n,i as a,m as be,J as T,K as $,j as b,n as m,t as S,h as Q,C as ye}from"./index-CqeaECIw.js";import{l as Ne}from"./NursingPlan-C9W9rrCY.js";function Ve(p){return L({url:"/nursing/NursingLevel/list",method:"get",params:p})}function Le(p){return L({url:"/nursing/NursingLevel/"+p,method:"get"})}function we(p){return L({url:"/nursing/NursingLevel",method:"post",data:p})}function ke(p){return L({url:"/nursing/NursingLevel",method:"put",data:p})}function he(p){return L({url:"/nursing/NursingLevel/"+p,method:"delete"})}const Ce={class:"app-container"},Se={class:"dialog-footer"},Ie=fe({name:"NursingLevel"}),xe=Object.assign(Ie,{setup(p){const{proxy:g}=ce(),{nursing_project_status:B}=g.useDict("nursing_project_status"),z=i([]),f=i(!1),I=i(!0),G=i(!0),U=i([]),H=i(!0),J=i(!0),w=i(0),q=i(""),O=_e({form:{},queryParams:{pageNum:1,pageSize:10,name:null,lplanId:null,fee:null,status:null,description:null},rules:{name:[{required:!0,message:"等级名称不能为空",trigger:"blur"}],lplanId:[{required:!0,message:"护理计划ID不能为空",trigger:"blur"}],fee:[{required:!0,message:"护理费用不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}]}}),{queryParams:s,form:u,rules:M}=ve(O);function y(){I.value=!0,Ve(s.value).then(o=>{z.value=o.rows,w.value=o.total,I.value=!1})}function W(){f.value=!1,x()}function x(){u.value={id:null,name:null,lplanId:null,fee:null,status:null,description:null,createTime:null,createBy:null,updateBy:null,remark:null,updateTime:null},g.resetForm("NursingLevelRef")}function R(){s.value.pageNum=1,y(),D()}function X(){g.resetForm("queryRef"),R()}function Y(o){U.value=o.map(e=>e.id),H.value=o.length!=1,J.value=!o.length}function Z(){D(),x(),f.value=!0,q.value="添加护理等级"}function ee(o){x();const e=o.id||U.value;Le(e).then(N=>{u.value=N.data,f.value=!0,q.value="修改护理等级"})}function le(){g.$refs.NursingLevelRef.validate(o=>{o&&(u.value.id!=null?ke(u.value).then(e=>{g.$modal.msgSuccess("修改成功"),f.value=!1,y()}):we(u.value).then(e=>{g.$modal.msgSuccess("新增成功"),f.value=!1,y()}))})}function te(o){const e=o.id||U.value;g.$modal.confirm('是否确认删除护理等级编号为"'+e+'"的数据项？').then(function(){return he(e)}).then(()=>{y(),g.$modal.msgSuccess("删除成功")}).catch(()=>{})}const k=i([]),ne=i({pageNum:1,pageSize:999999999999,sortNo:null,planName:null,status:null});function D(){Ne(ne.value).then(o=>{k.value=o.rows,w.value=o.total,console.log(k.value)})}return D(),y(),(o,e)=>{const N=r("el-input"),c=r("el-form-item"),F=r("el-option"),j=r("el-select"),_=r("el-button"),A=r("el-form"),ae=r("el-col"),oe=r("el-row"),v=r("el-table-column"),ue=r("el-tag"),re=r("el-table"),se=r("pagination"),ie=r("el-radio"),de=r("el-radio-group"),pe=r("el-dialog"),P=K("hasPermi"),me=K("loading");return d(),C("div",Ce,[V(t(A,{model:n(s),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[t(c,{label:"等级名称",prop:"name"},{default:a(()=>[t(N,{modelValue:n(s).name,"onUpdate:modelValue":e[0]||(e[0]=l=>n(s).name=l),placeholder:"请输入等级名称",clearable:"",onKeyup:be(R,["enter"])},null,8,["modelValue"])]),_:1}),t(c,{label:"状态",prop:"status"},{default:a(()=>[t(j,{modelValue:n(s).status,"onUpdate:modelValue":e[1]||(e[1]=l=>n(s).status=l),placeholder:"请选择",clearable:"",style:{width:"200px"}},{default:a(()=>[(d(!0),C(T,null,$(n(B),l=>(d(),b(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:a(()=>[t(_,{type:"primary",icon:"Search",onClick:R},{default:a(()=>e[10]||(e[10]=[m("搜索")])),_:1,__:[10]}),t(_,{icon:"Refresh",onClick:X},{default:a(()=>e[11]||(e[11]=[m("重置")])),_:1,__:[11]})]),_:1})]),_:1},8,["model"]),[[E,n(G)]]),t(oe,{gutter:10,class:"mb8"},{default:a(()=>[t(ae,{span:1.5},{default:a(()=>[V((d(),b(_,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:a(()=>e[12]||(e[12]=[m("新增")])),_:1,__:[12]})),[[P,["serve:NursingLevel:add"]]])]),_:1})]),_:1}),V((d(),b(re,{data:n(z),onSelectionChange:Y},{default:a(()=>[t(v,{type:"index",width:"50",label:"序号"}),t(v,{label:"等级名称",align:"center",prop:"name"}),t(v,{label:"护理计划",align:"center",prop:"lplanId"},{default:a(l=>{var h;return[m(S((h=n(k).find(ge=>ge.id==l.row.lplanId))==null?void 0:h.planName),1)]}),_:1}),t(v,{label:"护理费用",align:"center",prop:"fee"}),t(v,{label:"状态",align:"center",prop:"status"},{default:a(l=>[t(ue,{type:l.row.status===1?"success":"danger"},{default:a(()=>[m(S(l.row.status==0?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(v,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(l=>[Q("span",null,S(o.parseTime(l.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),t(v,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:a(l=>[V((d(),b(_,{link:"",type:"primary",icon:"Edit",onClick:h=>ee(l.row)},{default:a(()=>e[13]||(e[13]=[m("修改")])),_:2,__:[13]},1032,["onClick"])),[[P,["serve:NursingLevel:edit"]]]),V((d(),b(_,{link:"",type:"primary",icon:"Delete",onClick:h=>te(l.row)},{default:a(()=>e[14]||(e[14]=[m("删除")])),_:2,__:[14]},1032,["onClick"])),[[P,["serve:NursingLevel:remove"]]])]),_:1})]),_:1},8,["data"])),[[me,n(I)]]),V(t(se,{total:n(w),page:n(s).pageNum,"onUpdate:page":e[2]||(e[2]=l=>n(s).pageNum=l),limit:n(s).pageSize,"onUpdate:limit":e[3]||(e[3]=l=>n(s).pageSize=l),onPagination:y},null,8,["total","page","limit"]),[[E,n(w)>0]]),t(pe,{title:n(q),modelValue:n(f),"onUpdate:modelValue":e[9]||(e[9]=l=>ye(f)?f.value=l:null),width:"500px","append-to-body":""},{footer:a(()=>[Q("div",Se,[t(_,{type:"primary",onClick:le},{default:a(()=>e[15]||(e[15]=[m("确 定")])),_:1,__:[15]}),t(_,{onClick:W},{default:a(()=>e[16]||(e[16]=[m("取 消")])),_:1,__:[16]})])]),default:a(()=>[t(A,{ref:"NursingLevelRef",model:n(u),rules:n(M),"label-width":"80px"},{default:a(()=>[t(c,{label:"等级名称",prop:"name"},{default:a(()=>[t(N,{modelValue:n(u).name,"onUpdate:modelValue":e[4]||(e[4]=l=>n(u).name=l),placeholder:"请输入等级名称"},null,8,["modelValue"])]),_:1}),t(c,{label:"护理计划",prop:"lplanId"},{default:a(()=>[t(j,{modelValue:n(u).lplanId,"onUpdate:modelValue":e[5]||(e[5]=l=>n(u).lplanId=l),placeholder:"请选择护理计划"},{default:a(()=>[(d(!0),C(T,null,$(n(k),l=>(d(),b(F,{key:l.id,label:l.planName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"护理费用",prop:"fee"},{default:a(()=>[t(N,{modelValue:n(u).fee,"onUpdate:modelValue":e[6]||(e[6]=l=>n(u).fee=l),placeholder:"请输入护理费用"},null,8,["modelValue"])]),_:1}),t(c,{label:"状态",prop:"status"},{default:a(()=>[t(de,{modelValue:n(u).status,"onUpdate:modelValue":e[7]||(e[7]=l=>n(u).status=l)},{default:a(()=>[(d(!0),C(T,null,$(n(B),l=>(d(),b(ie,{key:l.value,label:l.value},{default:a(()=>[m(S(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"等级说明",prop:"description"},{default:a(()=>[t(N,{modelValue:n(u).description,"onUpdate:modelValue":e[8]||(e[8]=l=>n(u).description=l),placeholder:"请输入等级说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{xe as default};
