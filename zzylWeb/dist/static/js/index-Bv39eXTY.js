import{z as ce,d as ge,r as g,A as _e,I as fe,e as u,F as B,c as U,o as _,G as V,f as t,H as D,l as n,i as a,m as ve,J as F,K as z,j as y,n as c,h as L,t as w,C as be}from"./index-CqeaECIw.js";import{l as Ve,a as ye,d as we,u as E,b as ke}from"./NursingProject-i0CsEZsI.js";const Ne={class:"app-container"},Pe={class:"dialog-footer"},he=ce({name:"NursingProject"}),Ue=Object.assign(he,{setup(Ce){const{proxy:m}=ge(),{nursing_project_status:R}=m.useDict("nursing_project_status"),S=g([]),f=g(!1),k=g(!0),K=g(!0),N=g([]),A=g(!0),I=g(!0),P=g(0),h=g(""),Q=_e({form:{},queryParams:{pageNum:1,pageSize:10,name:null,orderNo:null,unit:null,price:null,image:null,nursingRequirement:null,status:null},rules:{status:[{required:!0,message:"状态不能为空",trigger:"change"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}]}}),{queryParams:d,form:o,rules:G}=fe(Q);function b(){k.value=!0,Ve(d.value).then(r=>{S.value=r.rows,P.value=r.total,k.value=!1})}function H(){f.value=!1,C()}function C(){o.value={id:null,name:null,orderNo:null,unit:null,price:null,image:null,nursingRequirement:null,status:null,createBy:null,updateBy:null,remark:null,createTime:null,updateTime:null},m.resetForm("NursingProjectRef")}function j(){d.value.pageNum=1,b()}function J(){m.resetForm("queryRef"),j()}function O(r){N.value=r.map(e=>e.id),A.value=r.length!=1,I.value=!r.length}function M(){C(),f.value=!0,h.value="添加护理项目"}function W(r){C();const e=r.id||N.value;ye(e).then(p=>{o.value=p.data,f.value=!0,h.value="修改护理项目"})}function X(){m.$refs.NursingProjectRef.validate(r=>{r&&(o.value.id!=null?E(o.value).then(e=>{m.$modal.msgSuccess("修改成功"),f.value=!1,b()}):ke(o.value).then(e=>{m.$modal.msgSuccess("新增成功"),f.value=!1,b()}))})}function Y(r){const e=r.id||N.value;m.$modal.confirm('是否确认删除护理项目编号为"'+e+'"的数据项？').then(function(){return we(e)}).then(()=>{b(),m.$modal.msgSuccess("删除成功")}).catch(()=>{})}const Z=r=>{const e=r.status,p=e==0?"启用":"禁用",i={id:r.id,status:e==0?1:0};m.$modal.confirm("是否确认"+p+"护理项目的数据项？").then(function(){return E(i)}).then(()=>{b(),m.$modal.msgSuccess(p+"成功")}).catch(()=>{})};return b(),(r,e)=>{const p=u("el-input"),i=u("el-form-item"),ee=u("el-option"),le=u("el-select"),v=u("el-button"),q=u("el-form"),te=u("el-col"),ne=u("el-row"),s=u("el-table-column"),ae=u("image-preview"),oe=u("el-tag"),ue=u("el-table"),re=u("pagination"),$=u("el-input-number"),ie=u("image-upload"),se=u("el-radio"),de=u("el-radio-group"),me=u("el-dialog"),x=B("hasPermi"),pe=B("loading");return _(),U("div",Ne,[V(t(q,{model:n(d),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[t(i,{label:"名称",prop:"name"},{default:a(()=>[t(p,{modelValue:n(d).name,"onUpdate:modelValue":e[0]||(e[0]=l=>n(d).name=l),placeholder:"请输入名称",clearable:"",onKeyup:ve(j,["enter"])},null,8,["modelValue"])]),_:1}),t(i,{label:"状态",prop:"name",style:{width:"160px"}},{default:a(()=>[t(le,{modelValue:n(d).status,"onUpdate:modelValue":e[1]||(e[1]=l=>n(d).status=l),placeholder:"请选择",clearable:""},{default:a(()=>[(_(!0),U(F,null,z(n(R),l=>(_(),y(ee,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:a(()=>[t(v,{type:"primary",icon:"Search",onClick:j},{default:a(()=>e[13]||(e[13]=[c("搜索")])),_:1,__:[13]}),t(v,{icon:"Refresh",onClick:J},{default:a(()=>e[14]||(e[14]=[c("重置")])),_:1,__:[14]})]),_:1})]),_:1},8,["model"]),[[D,n(K)]]),t(ne,{gutter:10,class:"mb8"},{default:a(()=>[t(te,{span:1.5},{default:a(()=>[V((_(),y(v,{type:"primary",plain:"",icon:"Plus",onClick:M},{default:a(()=>e[15]||(e[15]=[c("新增")])),_:1,__:[15]})),[[x,["serve:NursingProject:add"]]])]),_:1})]),_:1}),V((_(),y(ue,{data:n(S),onSelectionChange:O},{default:a(()=>[t(s,{type:"index",width:"50",label:"序号"}),t(s,{label:"编号",align:"center",prop:"id"}),t(s,{label:"名称",align:"center",prop:"name"}),t(s,{label:"排序号",align:"center",prop:"orderNo"}),t(s,{label:"单位",align:"center",prop:"unit"}),t(s,{label:"价格",align:"center",prop:"price"}),t(s,{label:"图片",align:"center",prop:"image",width:"100"},{default:a(l=>[t(ae,{src:l.row.image,width:50,height:50},null,8,["src"])]),_:1}),t(s,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(l=>[L("span",null,w(r.parseTime(l.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),t(s,{label:"护理要求",align:"center",prop:"nursingRequirement"}),t(s,{label:"状态",align:"center",prop:"status"},{default:a(l=>[t(oe,{type:l.row.status===1?"success":"danger"},{default:a(()=>[c(w(l.row.status==0?"禁用":"启用"),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"备注",align:"center",prop:"remark"}),t(s,{fixed:"right",label:"操作",align:"center","class-name":"small-padding fixed-width",width:"200px"},{default:a(l=>[V((_(),y(v,{link:"",type:"primary",icon:"Edit",onClick:T=>W(l.row)},{default:a(()=>e[16]||(e[16]=[c("修改")])),_:2,__:[16]},1032,["onClick"])),[[x,["serve:NursingProject:edit"]]]),V((_(),y(v,{link:"",type:"primary",icon:"Delete",onClick:T=>Y(l.row)},{default:a(()=>e[17]||(e[17]=[c("删除")])),_:2,__:[17]},1032,["onClick"])),[[x,["serve:NursingProject:remove"]]]),t(v,{link:"",type:"primary",icon:l.row.status==0?"Lock":"Unlock",onClick:T=>Z(l.row)},{default:a(()=>[c(w(l.row.status==0?"启用":"禁用"),1)]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[pe,n(k)]]),V(t(re,{total:n(P),page:n(d).pageNum,"onUpdate:page":e[2]||(e[2]=l=>n(d).pageNum=l),limit:n(d).pageSize,"onUpdate:limit":e[3]||(e[3]=l=>n(d).pageSize=l),onPagination:b},null,8,["total","page","limit"]),[[D,n(P)>0]]),t(me,{title:n(h),modelValue:n(f),"onUpdate:modelValue":e[12]||(e[12]=l=>be(f)?f.value=l:null),width:"500px","append-to-body":""},{footer:a(()=>[L("div",Pe,[t(v,{type:"primary",onClick:X},{default:a(()=>e[18]||(e[18]=[c("确 定")])),_:1,__:[18]}),t(v,{onClick:H},{default:a(()=>e[19]||(e[19]=[c("取 消")])),_:1,__:[19]})])]),default:a(()=>[t(q,{ref:"NursingProjectRef",model:n(o),rules:n(G),"label-width":"80px"},{default:a(()=>[t(i,{label:"名称",prop:"name"},{default:a(()=>[t(p,{modelValue:n(o).name,"onUpdate:modelValue":e[4]||(e[4]=l=>n(o).name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(i,{label:"排序号",prop:"orderNo"},{default:a(()=>[t($,{modelValue:n(o).orderNo,"onUpdate:modelValue":e[5]||(e[5]=l=>n(o).orderNo=l),min:1,max:999999,placeholder:"请输入排序号",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(i,{label:"单位",prop:"unit"},{default:a(()=>[t(p,{modelValue:n(o).unit,"onUpdate:modelValue":e[6]||(e[6]=l=>n(o).unit=l),placeholder:"请输入单位"},null,8,["modelValue"])]),_:1}),t(i,{label:"价格",prop:"price"},{default:a(()=>[t($,{modelValue:n(o).price,"onUpdate:modelValue":e[7]||(e[7]=l=>n(o).price=l),placeholder:"请输入",min:1,max:100,step:1},null,8,["modelValue"])]),_:1}),t(i,{label:"图片",prop:"image"},{default:a(()=>[t(ie,{modelValue:n(o).image,"onUpdate:modelValue":e[8]||(e[8]=l=>n(o).image=l)},null,8,["modelValue"])]),_:1}),t(i,{label:"状态",prop:"status"},{default:a(()=>[t(de,{modelValue:n(o).status,"onUpdate:modelValue":e[9]||(e[9]=l=>n(o).status=l)},{default:a(()=>[(_(!0),U(F,null,z(n(R),l=>(_(),y(se,{key:l.value,label:l.value},{default:a(()=>[c(w(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"护理要求",prop:"nursingRequirement"},{default:a(()=>[t(p,{modelValue:n(o).nursingRequirement,"onUpdate:modelValue":e[10]||(e[10]=l=>n(o).nursingRequirement=l),placeholder:"请输入护理要求",type:"textarea"},null,8,["modelValue"])]),_:1}),t(i,{label:"备注",prop:"remark"},{default:a(()=>[t(p,{modelValue:n(o).remark,"onUpdate:modelValue":e[11]||(e[11]=l=>n(o).remark=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ue as default};
